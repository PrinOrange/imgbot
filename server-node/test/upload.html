<!DOCTYPE html>
<html>
  <head>
    <title>上传图片接口测试</title>
  </head>
  <body>
    <input type="file" id="upload-dom" />
    <button id="post-file-button">发送文件</button>
    <script>
      const formData = new FormData();
      const upload_dom = document.getElementById("upload-dom");
      const post_file_button = document.getElementById("post-file-button");
      const api_URL = "http://localhost:2000/upload-image";

      function selectImageAction() {
        formData.append(`upload_image`, upload_dom.files[0]);
      }

      function uploadImageAction() {
        const xhr = new XMLHttpRequest();
        xhr.open("POST", api_URL, true);
        xhr.send(formData);
      }
      upload_dom.addEventListener("change", selectImageAction);
      post_file_button.addEventListener("click", uploadImageAction);
    </script>
  </body>
</html>